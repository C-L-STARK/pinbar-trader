<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="äº¤æ˜“å‘˜å¿ƒç†æµ‹è¯• - è¯„ä¼°æ‚¨çš„äº¤æ˜“å¿ƒç†ç´ è´¨" />
    <title>äº¤æ˜“å‘˜å¿ƒç†æµ‹è¯• - æºè®¡åˆ’</title>
    <style>
      /* ===== CSSå˜é‡ ===== */
      :root {
        --primary-color: #6366f1;
        --primary-dark: #4f46e5;
        --primary-light: #818cf8;
        --secondary-color: #10b981;
        --accent-color: #f59e0b;
        --danger-color: #ef4444;

        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --text-light: #9ca3af;
        --text-white: #ffffff;

        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --bg-tertiary: #f3f4f6;
        --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

        --border-color: #e5e7eb;
        --border-radius: 0.5rem;
        --border-radius-lg: 1rem;

        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);

        --transition: 0.3s ease;
        --max-width: 900px;
      }

      /* ===== åŸºç¡€é‡ç½® ===== */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html {
        font-size: 16px;
        scroll-behavior: smooth;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        line-height: 1.6;
        color: var(--text-primary);
        background: var(--bg-secondary);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      button {
        font-family: inherit;
        cursor: pointer;
        border: none;
        outline: none;
      }

      ul {
        list-style: none;
      }

      a {
        text-decoration: none;
        color: inherit;
      }

      /* ===== å·¥å…·ç±» ===== */
      .container {
        max-width: var(--max-width);
        margin: 0 auto;
        padding: 0 1.5rem;
      }

      /* ===== ä¸»å†…å®¹åŒºåŸŸ ===== */
      .main {
        flex: 1;
        padding: 3rem 0;
      }

      /* ===== å±å¹•ç®¡ç† ===== */
      .screen {
        display: none;
        animation: fadeIn 0.5s ease;
      }

      .screen.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ===== æ¬¢è¿é¡µé¢ ===== */
      .welcome-card {
        background: var(--bg-primary);
        border-radius: var(--border-radius-lg);
        padding: 3rem;
        box-shadow: var(--shadow-lg);
        text-align: center;
        max-width: 700px;
        margin: 0 auto;
      }

      .icon-wrapper {
        display: inline-flex;
        padding: 1.5rem;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--primary-light)
        );
        border-radius: 50%;
        margin-bottom: 2rem;
      }

      .icon-brain {
        width: 60px;
        height: 60px;
        stroke: white;
      }

      .welcome-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
      }

      .welcome-subtitle {
        font-size: 1.25rem;
        color: var(--text-secondary);
        margin-bottom: 2.5rem;
      }

      .test-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2.5rem;
      }

      .info-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        background: var(--bg-secondary);
        border-radius: var(--border-radius);
      }

      .info-icon {
        font-size: 2rem;
      }

      .info-content h3 {
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--text-secondary);
        margin-bottom: 0.25rem;
      }

      .info-content p {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary);
      }

      .test-dimensions {
        background: var(--bg-secondary);
        border-radius: var(--border-radius);
        padding: 1.5rem;
        margin-bottom: 2rem;
        text-align: left;
      }

      .test-dimensions h3 {
        font-size: 1.125rem;
        margin-bottom: 1rem;
        color: var(--text-primary);
      }

      .test-dimensions ul {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 0.75rem;
      }

      .test-dimensions li {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 1rem;
        color: var(--text-secondary);
      }

      .dimension-icon {
        font-size: 1.25rem;
      }

      .disclaimer {
        margin-top: 1.5rem;
        font-size: 0.875rem;
        color: var(--text-light);
        font-style: italic;
      }

      /* ===== æŒ‰é’®æ ·å¼ ===== */
      .btn-primary,
      .btn-secondary {
        padding: 0.875rem 2rem;
        border-radius: var(--border-radius);
        font-size: 1rem;
        font-weight: 600;
        transition: all var(--transition);
        display: inline-block;
      }

      .btn-primary {
        background: var(--primary-color);
        color: white;
      }

      .btn-primary:hover:not(:disabled) {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .btn-primary:disabled {
        background: var(--text-light);
        cursor: not-allowed;
      }

      .btn-secondary {
        background: transparent;
        color: var(--text-secondary);
        border: 2px solid var(--border-color);
      }

      .btn-secondary:hover:not(:disabled) {
        background: var(--bg-tertiary);
        border-color: var(--text-secondary);
      }

      .btn-large {
        padding: 1rem 3rem;
        font-size: 1.125rem;
      }

      /* ===== æµ‹è¯•é¡µé¢ ===== */
      .test-container {
        max-width: 800px;
        margin: 0 auto;
      }

      .progress-wrapper {
        background: var(--bg-primary);
        padding: 1.5rem;
        border-radius: var(--border-radius-lg);
        margin-bottom: 2rem;
        box-shadow: var(--shadow-md);
      }

      .progress-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.75rem;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--text-secondary);
      }

      .progress-percent {
        color: var(--primary-color);
      }

      .progress-bar {
        height: 8px;
        background: var(--bg-tertiary);
        border-radius: 999px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--primary-light)
        );
        border-radius: 999px;
        transition: width 0.5s ease;
        width: 0%;
      }

      .question-card {
        background: var(--bg-primary);
        padding: 2.5rem;
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow-lg);
        margin-bottom: 2rem;
        min-height: 400px;
      }

      .question-category {
        display: inline-block;
        padding: 0.5rem 1rem;
        background: rgba(99, 102, 241, 0.1);
        color: var(--primary-color);
        border-radius: var(--border-radius);
        font-size: 0.875rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
      }

      .question-text {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 2rem;
        line-height: 1.4;
        color: var(--text-primary);
      }

      .options-container {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .option-btn {
        width: 100%;
        padding: 1.25rem 1.5rem;
        background: var(--bg-secondary);
        border: 2px solid var(--border-color);
        border-radius: var(--border-radius);
        text-align: left;
        font-size: 1rem;
        color: var(--text-primary);
        transition: all var(--transition);
        cursor: pointer;
      }

      .option-btn:hover {
        background: var(--bg-tertiary);
        border-color: var(--primary-light);
        transform: translateX(8px);
      }

      .option-btn.selected {
        background: rgba(99, 102, 241, 0.1);
        border-color: var(--primary-color);
        color: var(--primary-color);
        font-weight: 600;
      }

      /* ===== ç»“æœé¡µé¢ ===== */
      .result-container {
        max-width: 900px;
        margin: 0 auto;
      }

      .result-header {
        text-align: center;
        margin-bottom: 3rem;
      }

      .result-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
      }

      .result-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      .result-subtitle {
        font-size: 1.25rem;
        color: var(--text-secondary);
      }

      .overall-score {
        background: var(--bg-primary);
        border-radius: var(--border-radius-lg);
        padding: 2.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-lg);
        display: flex;
        align-items: center;
        gap: 3rem;
      }

      .score-circle {
        position: relative;
        width: 200px;
        height: 200px;
        flex-shrink: 0;
      }

      .score-svg {
        width: 100%;
        height: 100%;
        transform: rotate(-90deg);
      }

      .score-bg {
        fill: none;
        stroke: var(--bg-tertiary);
        stroke-width: 12;
      }

      .score-progress {
        fill: none;
        stroke: url(#scoreGradient);
        stroke-width: 12;
        stroke-linecap: round;
        stroke-dasharray: 565.48;
        stroke-dashoffset: 565.48;
        transition: stroke-dashoffset 1.5s ease;
      }

      .score-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
      }

      .score-number {
        font-size: 3rem;
        font-weight: 700;
        color: var(--primary-color);
        line-height: 1;
      }

      .score-label {
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-top: 0.5rem;
      }

      .score-description {
        flex: 1;
      }

      .score-description h3 {
        font-size: 1.75rem;
        margin-bottom: 1rem;
        color: var(--text-primary);
      }

      .score-description p {
        font-size: 1.125rem;
        color: var(--text-secondary);
        line-height: 1.6;
      }

      .section-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        color: var(--text-primary);
      }

      .dimensions-score {
        background: var(--bg-primary);
        border-radius: var(--border-radius-lg);
        padding: 2.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-md);
      }

      .dimension-bars {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .dimension-bar {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .dimension-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .dimension-name {
        font-weight: 600;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .dimension-score {
        font-weight: 700;
        color: var(--primary-color);
      }

      .dimension-bar-bg {
        height: 12px;
        background: var(--bg-tertiary);
        border-radius: 999px;
        overflow: hidden;
      }

      .dimension-bar-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--primary-light)
        );
        border-radius: 999px;
        transition: width 1s ease;
        width: 0%;
      }

      .detailed-analysis {
        background: var(--bg-primary);
        border-radius: var(--border-radius-lg);
        padding: 2.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-md);
      }

      .analysis-content {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .analysis-item {
        padding: 1.5rem;
        background: var(--bg-secondary);
        border-radius: var(--border-radius);
        border-left: 4px solid var(--primary-color);
      }

      .analysis-item h4 {
        font-size: 1.125rem;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .analysis-item p {
        color: var(--text-secondary);
        line-height: 1.6;
      }

      .recommendations {
        background: var(--bg-primary);
        border-radius: var(--border-radius-lg);
        padding: 2.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-md);
      }

      .recommendation-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .recommendation-item {
        display: flex;
        gap: 1rem;
        padding: 1.25rem;
        background: var(--bg-secondary);
        border-radius: var(--border-radius);
      }

      .recommendation-icon {
        flex-shrink: 0;
        width: 40px;
        height: 40px;
        background: rgba(99, 102, 241, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
      }

      .recommendation-content {
        flex: 1;
      }

      .recommendation-content h4 {
        font-size: 1rem;
        margin-bottom: 0.25rem;
        color: var(--text-primary);
      }

      .recommendation-content p {
        font-size: 0.875rem;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      .result-actions {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 2rem;
      }

      /* ===== å“åº”å¼è®¾è®¡ ===== */
      @media (max-width: 768px) {
        .welcome-card {
          padding: 2rem 1.5rem;
        }

        .welcome-title {
          font-size: 2rem;
        }

        .test-info {
          grid-template-columns: 1fr;
        }

        .test-dimensions ul {
          grid-template-columns: 1fr;
        }

        .question-card {
          padding: 1.5rem;
          min-height: auto;
        }

        .question-text {
          font-size: 1.25rem;
        }

        .overall-score {
          flex-direction: column;
          text-align: center;
          gap: 2rem;
        }

        .result-title {
          font-size: 2rem;
        }

        .result-actions {
          flex-direction: column;
        }

        .result-actions button {
          width: 100%;
        }
      }

      /* ===== SVGæ¸å˜å®šä¹‰ ===== */
      svg defs {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- ä¸»è¦å†…å®¹ -->
    <main class="main">
      <div class="container">
        <!-- æ¬¢è¿é¡µé¢ -->
        <section id="welcomeScreen" class="screen active">
          <div class="welcome-card">
            <div class="icon-wrapper">
              <svg
                class="icon-brain"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"
                />
                <path
                  d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"
                />
              </svg>
            </div>
            <h2 class="welcome-title">äº¤æ˜“å‘˜å¿ƒç†æµ‹è¯•</h2>
            <p class="welcome-subtitle">å…¨é¢è¯„ä¼°æ‚¨çš„äº¤æ˜“å¿ƒç†ç´ è´¨</p>

            <div class="test-info">
              <div class="info-item">
                <div class="info-icon">ğŸ“Š</div>
                <div class="info-content">
                  <h3>æµ‹è¯•æ—¶é•¿</h3>
                  <p>çº¦ 5-8 åˆ†é’Ÿ</p>
                </div>
              </div>
              <div class="info-item">
                <div class="info-icon">â“</div>
                <div class="info-content">
                  <h3>é¢˜ç›®æ•°é‡</h3>
                  <p>20 é“é¢˜ç›®</p>
                </div>
              </div>
              <div class="info-item">
                <div class="info-icon">ğŸ¯</div>
                <div class="info-content">
                  <h3>è¯„ä¼°ç»´åº¦</h3>
                  <p>5 ä¸ªæ ¸å¿ƒç»´åº¦</p>
                </div>
              </div>
            </div>

            <div class="test-dimensions">
              <h3>æµ‹è¯•ç»´åº¦åŒ…æ‹¬ï¼š</h3>
              <ul>
                <li><span class="dimension-icon">ğŸ²</span> é£é™©æ‰¿å—èƒ½åŠ›</li>
                <li><span class="dimension-icon">ğŸ˜Œ</span> æƒ…ç»ªæ§åˆ¶èƒ½åŠ›</li>
                <li><span class="dimension-icon">ğŸ§ </span> å†³ç­–èƒ½åŠ›</li>
                <li><span class="dimension-icon">ğŸ“‹</span> çºªå¾‹æ€§</li>
                <li><span class="dimension-icon">ğŸ’ª</span> å‹åŠ›ç®¡ç†</li>
              </ul>
            </div>

            <button class="btn-primary btn-large" id="startBtn">
              å¼€å§‹æµ‹è¯•
            </button>

            <p class="disclaimer">è¯·æ ¹æ®æ‚¨çš„çœŸå®æ„Ÿå—ä½œç­”ï¼Œæ²¡æœ‰å¯¹é”™ä¹‹åˆ†</p>
          </div>
        </section>

        <!-- æµ‹è¯•é¡µé¢ -->
        <section id="testScreen" class="screen">
          <div class="test-container">
            <!-- è¿›åº¦æ¡ -->
            <div class="progress-wrapper">
              <div class="progress-info">
                <span class="progress-text"
                  >é—®é¢˜ <span id="currentQuestion">1</span> /
                  <span id="totalQuestions">20</span></span
                >
                <span class="progress-percent" id="progressPercent">5%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
            </div>

            <!-- é—®é¢˜å¡ç‰‡ -->
            <div class="question-card" id="questionCard">
              <div class="question-category" id="questionCategory"></div>
              <h2 class="question-text" id="questionText"></h2>

              <div class="options-container" id="optionsContainer">
                <!-- é€‰é¡¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
              </div>
            </div>
          </div>
        </section>

        <!-- ç»“æœé¡µé¢ -->
        <section id="resultScreen" class="screen">
          <div class="result-container">
            <div class="result-header">
              <div class="result-icon">âœ¨</div>
              <h2 class="result-title">æµ‹è¯•å®Œæˆ</h2>
              <p class="result-subtitle">æ‚¨çš„äº¤æ˜“å¿ƒç†ç´ è´¨è¯„ä¼°æŠ¥å‘Š</p>
            </div>

            <!-- æ€»ä½“è¯„åˆ† -->
            <div class="overall-score">
              <div class="score-circle">
                <svg class="score-svg" viewBox="0 0 200 200">
                  <circle class="score-bg" cx="100" cy="100" r="90"></circle>
                  <circle
                    class="score-progress"
                    cx="100"
                    cy="100"
                    r="90"
                    id="scoreCircle"
                  ></circle>
                </svg>
                <div class="score-content">
                  <div class="score-number" id="totalScore">0</div>
                  <div class="score-label">ç»¼åˆå¾—åˆ†</div>
                </div>
              </div>
              <div class="score-description">
                <h3 id="scoreLevel"></h3>
                <p id="scoreText"></p>
              </div>
            </div>

            <!-- å„ç»´åº¦å¾—åˆ† -->
            <div class="dimensions-score">
              <h3 class="section-title">å„ç»´åº¦å¾—åˆ†</h3>
              <div class="dimension-bars" id="dimensionBars">
                <!-- ç»´åº¦è¯„åˆ†å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
              </div>
            </div>

            <!-- è¯¦ç»†åˆ†æ -->
            <div class="detailed-analysis">
              <h3 class="section-title">è¯¦ç»†åˆ†æ</h3>
              <div class="analysis-content" id="analysisContent">
                <!-- åˆ†æå†…å®¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
              </div>
            </div>

            <!-- å»ºè®® -->
            <div class="recommendations">
              <h3 class="section-title">æ”¹è¿›å»ºè®®</h3>
              <div class="recommendation-list" id="recommendationList">
                <!-- å»ºè®®å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
              </div>
            </div>

            <!-- æ“ä½œæŒ‰é’® -->
            <div class="result-actions">
              <button class="btn-primary" id="retakeBtn">é‡æ–°æµ‹è¯•</button>
            </div>
          </div>
        </section>
      </div>
    </main>

    <script>
      // ===== æµ‹è¯•é¢˜ç›®æ•°æ® =====
      const questions = [
        // é£é™©æ‰¿å—èƒ½åŠ› (4é¢˜)
        {
          id: 1,
          category: "é£é™©æ‰¿å—èƒ½åŠ›",
          dimension: "risk",
          text: "å½“æ‚¨çš„äº¤æ˜“è´¦æˆ·åœ¨ä¸€å¤©å†…äºæŸ10%æ—¶ï¼Œæ‚¨ä¼šå¦‚ä½•ååº”ï¼Ÿ",
          options: [
            { text: "ç«‹å³å¹³ä»“ï¼Œåœæ­¢äº¤æ˜“", score: 1 },
            { text: "æ„Ÿåˆ°ç„¦è™‘ï¼Œä½†ç»§ç»­è§‚å¯Ÿ", score: 2 },
            { text: "ä¿æŒå†·é™ï¼Œåˆ†æåŸå› ", score: 3 },
            { text: "è®¤ä¸ºè¿™æ˜¯æ­£å¸¸æ³¢åŠ¨ï¼Œç»§ç»­æ‰§è¡Œç­–ç•¥", score: 4 },
          ],
        },
        {
          id: 2,
          category: "é£é™©æ‰¿å—èƒ½åŠ›",
          dimension: "risk",
          text: "åœ¨åˆ¶å®šäº¤æ˜“è®¡åˆ’æ—¶ï¼Œæ‚¨é€šå¸¸ä¼šè®¾å®šå¤šå¤§çš„å•ç¬”é£é™©æ•å£ï¼Ÿ",
          options: [
            { text: "ä¸è¶…è¿‡è´¦æˆ·çš„1%", score: 2 },
            { text: "è´¦æˆ·çš„1-2%", score: 4 },
            { text: "è´¦æˆ·çš„2-5%", score: 3 },
            { text: "æ²¡æœ‰å›ºå®šæ ‡å‡†ï¼Œæ ¹æ®æ„Ÿè§‰æ¥", score: 1 },
          ],
        },
        {
          id: 3,
          category: "é£é™©æ‰¿å—èƒ½åŠ›",
          dimension: "risk",
          text: "æ‚¨æ›´å€¾å‘äºå“ªç§äº¤æ˜“æ–¹å¼ï¼Ÿ",
          options: [
            { text: "ä¿å®ˆç¨³å¥ï¼Œè¿½æ±‚å°é¢ç¨³å®šæ”¶ç›Š", score: 2 },
            { text: "å¹³è¡¡é£é™©æ”¶ç›Šï¼Œé€‚åº¦æ¿€è¿›", score: 4 },
            { text: "é«˜é£é™©é«˜æ”¶ç›Šï¼Œè¿½æ±‚å¤§å¹…ç›ˆåˆ©", score: 2 },
            { text: "å®Œå…¨çœ‹å¸‚åœºæœºä¼šå†³å®š", score: 1 },
          ],
        },
        {
          id: 4,
          category: "é£é™©æ‰¿å—èƒ½åŠ›",
          dimension: "risk",
          text: 'å½“çœ‹åˆ°ä¸€ä¸ª"ç¡®å®šæ€§å¾ˆé«˜"çš„äº¤æ˜“æœºä¼šæ—¶ï¼Œæ‚¨ä¼šæŠ•å…¥å¤šå°‘ä»“ä½ï¼Ÿ',
          options: [
            { text: "10-20%çš„ä»“ä½", score: 4 },
            { text: "20-40%çš„ä»“ä½", score: 3 },
            { text: "40-60%çš„ä»“ä½", score: 2 },
            { text: "å…¨ä»“æˆ–è€…åŠ æ æ†", score: 1 },
          ],
        },

        // æƒ…ç»ªæ§åˆ¶èƒ½åŠ› (4é¢˜)
        {
          id: 5,
          category: "æƒ…ç»ªæ§åˆ¶èƒ½åŠ›",
          dimension: "emotion",
          text: "å½“è¿ç»­å‡ºç°3æ¬¡äºæŸäº¤æ˜“åï¼Œæ‚¨çš„å¿ƒæ€ä¼šæ˜¯ï¼Ÿ",
          options: [
            { text: "éå¸¸æ²®ä¸§ï¼Œæ€€ç–‘è‡ªå·±çš„èƒ½åŠ›", score: 1 },
            { text: "æœ‰äº›å¤±è½ï¼Œä½†å‘Šè¯‰è‡ªå·±è¦åšæŒ", score: 2 },
            { text: "ä¿æŒå¹³é™ï¼Œå›é¡¾äº¤æ˜“å¯»æ‰¾é—®é¢˜", score: 4 },
            { text: "å®Œå…¨ä¸å—å½±å“ï¼Œè¿™æ˜¯äº¤æ˜“çš„ä¸€éƒ¨åˆ†", score: 3 },
          ],
        },
        {
          id: 6,
          category: "æƒ…ç»ªæ§åˆ¶èƒ½åŠ›",
          dimension: "emotion",
          text: "ç›ˆåˆ©æ—¶ï¼Œæ‚¨ä¼šæœ‰æ€æ ·çš„æƒ…ç»ªååº”ï¼Ÿ",
          options: [
            { text: "å…´å¥‹æ¿€åŠ¨ï¼Œæƒ³è¦åŠ å¤§ä»“ä½", score: 1 },
            { text: "é«˜å…´ï¼Œä½†ä¼šæé†’è‡ªå·±ä¿æŒç†æ€§", score: 3 },
            { text: "å¹³é™è®°å½•ï¼Œç»§ç»­æ‰§è¡Œè®¡åˆ’", score: 4 },
            { text: "æ‹…å¿ƒç›ˆåˆ©å›åï¼Œæƒ³è¦ç«‹å³æ­¢ç›ˆ", score: 2 },
          ],
        },
        {
          id: 7,
          category: "æƒ…ç»ªæ§åˆ¶èƒ½åŠ›",
          dimension: "emotion",
          text: "åœ¨é‡è¦çš„ç»æµæ•°æ®å‘å¸ƒå‰ï¼Œæ‚¨çš„çŠ¶æ€é€šå¸¸æ˜¯ï¼Ÿ",
          options: [
            { text: "ç´§å¼ ç„¦è™‘ï¼Œéš¾ä»¥é›†ä¸­æ³¨æ„åŠ›", score: 1 },
            { text: "æœ‰äº›ç´§å¼ ï¼Œä½†èƒ½æ§åˆ¶", score: 2 },
            { text: "ä¿æŒè­¦è§‰ï¼Œä½†æƒ…ç»ªç¨³å®š", score: 4 },
            { text: "å®Œå…¨æ”¾æ¾ï¼ŒæŒ‰è®¡åˆ’è¡Œäº‹", score: 3 },
          ],
        },
        {
          id: 8,
          category: "æƒ…ç»ªæ§åˆ¶èƒ½åŠ›",
          dimension: "emotion",
          text: "å½“å¸‚åœºèµ°åŠ¿ä¸æ‚¨çš„é¢„åˆ¤å®Œå…¨ç›¸åæ—¶ï¼Ÿ",
          options: [
            { text: 'å›ºæ‰§å·±è§ï¼Œç­‰å¾…å¸‚åœº"å›å¤´"', score: 1 },
            { text: "æƒ…ç»ªæ³¢åŠ¨ï¼Œä½†ä¼šè€ƒè™‘æ­¢æŸ", score: 2 },
            { text: "ç«‹å³æ­¢æŸï¼Œé‡æ–°åˆ†æ", score: 4 },
            { text: "ä¿æŒå†·é™ï¼Œæ£€æŸ¥æ­¢æŸä½", score: 3 },
          ],
        },

        // å†³ç­–èƒ½åŠ› (4é¢˜)
        {
          id: 9,
          category: "å†³ç­–èƒ½åŠ›",
          dimension: "decision",
          text: "æ‚¨åœ¨è¿›è¡Œäº¤æ˜“å†³ç­–æ—¶ä¸»è¦ä¾æ®ä»€ä¹ˆï¼Ÿ",
          options: [
            { text: "ç›´è§‰å’Œæ„Ÿè§‰", score: 1 },
            { text: "æŠ€æœ¯æŒ‡æ ‡å’Œå›¾è¡¨", score: 3 },
            { text: "åŸºæœ¬é¢åˆ†æ", score: 3 },
            { text: "ç»¼åˆåˆ†æå’Œäº¤æ˜“ç³»ç»Ÿ", score: 4 },
          ],
        },
        {
          id: 10,
          category: "å†³ç­–èƒ½åŠ›",
          dimension: "decision",
          text: "é¢å¯¹çªå‘å¸‚åœºäº‹ä»¶ï¼Œæ‚¨é€šå¸¸ä¼šï¼Ÿ",
          options: [
            { text: "ç«‹å³è·Ÿéšå¸‚åœºæƒ…ç»ªæ“ä½œ", score: 1 },
            { text: "å…ˆè§‚æœ›ï¼Œå†åšå†³å®š", score: 3 },
            { text: "æŒ‰ç…§é¢„æ¡ˆæ‰§è¡Œ", score: 4 },
            { text: "æš‚åœäº¤æ˜“ï¼Œç­‰å¾…æ˜æœ—", score: 2 },
          ],
        },
        {
          id: 11,
          category: "å†³ç­–èƒ½åŠ›",
          dimension: "decision",
          text: "æ‚¨åˆ¶å®šäº¤æ˜“è®¡åˆ’çš„é¢‘ç‡æ˜¯ï¼Ÿ",
          options: [
            { text: "æ²¡æœ‰å›ºå®šè®¡åˆ’ï¼Œéšæœºåº”å˜", score: 1 },
            { text: "å¶å°”åšè®¡åˆ’", score: 2 },
            { text: "æ¯å‘¨åˆ¶å®šè®¡åˆ’", score: 3 },
            { text: "æ¯æ¬¡äº¤æ˜“å‰éƒ½æœ‰è¯¦ç»†è®¡åˆ’", score: 4 },
          ],
        },
        {
          id: 12,
          category: "å†³ç­–èƒ½åŠ›",
          dimension: "decision",
          text: "åœ¨å†³ç­–æ—¶é—´ç´§è¿«çš„æƒ…å†µä¸‹ï¼Œæ‚¨çš„è¡¨ç°å¦‚ä½•ï¼Ÿ",
          options: [
            { text: "å®¹æ˜“æ…Œä¹±ï¼Œåšå‡ºå†²åŠ¨å†³å®š", score: 1 },
            { text: "æœ‰äº›ç´§å¼ ï¼Œä½†èƒ½åšå†³å®š", score: 2 },
            { text: "ä¿æŒå†·é™ï¼Œå¿«é€Ÿåˆ†æ", score: 4 },
            { text: "å®æ„¿é”™è¿‡ï¼Œä¹Ÿä¸å†²åŠ¨", score: 3 },
          ],
        },

        // çºªå¾‹æ€§ (4é¢˜)
        {
          id: 13,
          category: "çºªå¾‹æ€§",
          dimension: "discipline",
          text: "æ‚¨è®¾ç½®æ­¢æŸåï¼Œæ‰§è¡Œæƒ…å†µå¦‚ä½•ï¼Ÿ",
          options: [
            { text: "ç»å¸¸ç§»åŠ¨æˆ–å–æ¶ˆæ­¢æŸ", score: 1 },
            { text: "æœ‰æ—¶ä¼šè°ƒæ•´æ­¢æŸ", score: 2 },
            { text: "åŸºæœ¬ä¸¥æ ¼æ‰§è¡Œ", score: 3 },
            { text: "å§‹ç»ˆä¸¥æ ¼æ‰§è¡Œ", score: 4 },
          ],
        },
        {
          id: 14,
          category: "çºªå¾‹æ€§",
          dimension: "discipline",
          text: "å…³äºäº¤æ˜“æ—¥å¿—ï¼Œæ‚¨çš„ä¹ æƒ¯æ˜¯ï¼Ÿ",
          options: [
            { text: "ä»ä¸è®°å½•", score: 1 },
            { text: "å¶å°”è®°å½•é‡è¦äº¤æ˜“", score: 2 },
            { text: "ç»å¸¸è®°å½•", score: 3 },
            { text: "æ¯ç¬”äº¤æ˜“éƒ½è¯¦ç»†è®°å½•", score: 4 },
          ],
        },
        {
          id: 15,
          category: "çºªå¾‹æ€§",
          dimension: "discipline",
          text: "å½“è¾¾åˆ°é¢„å®šçš„ç›ˆåˆ©ç›®æ ‡åï¼Œæ‚¨ä¼šï¼Ÿ",
          options: [
            { text: "ç»§ç»­äº¤æ˜“ï¼Œæƒ³èµšæ›´å¤š", score: 1 },
            { text: "è§†æƒ…å†µè€Œå®š", score: 2 },
            { text: "é€šå¸¸ä¼šåœæ­¢äº¤æ˜“", score: 3 },
            { text: "ä¸¥æ ¼æ‰§è¡Œï¼Œç«‹å³åœæ­¢", score: 4 },
          ],
        },
        {
          id: 16,
          category: "çºªå¾‹æ€§",
          dimension: "discipline",
          text: "æ‚¨æ˜¯å¦ä¼šåœ¨æƒ…ç»ªåŒ–çš„çŠ¶æ€ä¸‹è¿›è¡Œäº¤æ˜“ï¼Ÿ",
          options: [
            { text: "ç»å¸¸ä¼š", score: 1 },
            { text: "æœ‰æ—¶ä¼š", score: 2 },
            { text: "å¾ˆå°‘ä¼š", score: 3 },
            { text: "ä»ä¸ä¼š", score: 4 },
          ],
        },

        // å‹åŠ›ç®¡ç† (4é¢˜)
        {
          id: 17,
          category: "å‹åŠ›ç®¡ç†",
          dimension: "stress",
          text: "åœ¨é«˜å¼ºåº¦äº¤æ˜“æœŸé—´ï¼Œæ‚¨çš„ç¡çœ è´¨é‡å¦‚ä½•ï¼Ÿ",
          options: [
            { text: "ä¸¥é‡å¤±çœ ï¼Œæ— æ³•ä¼‘æ¯", score: 1 },
            { text: "ç¡çœ è´¨é‡ä¸‹é™", score: 2 },
            { text: "ç¨æœ‰å½±å“ï¼Œä½†åŸºæœ¬æ­£å¸¸", score: 3 },
            { text: "å®Œå…¨ä¸å—å½±å“", score: 4 },
          ],
        },
        {
          id: 18,
          category: "å‹åŠ›ç®¡ç†",
          dimension: "stress",
          text: "å½“é¢ä¸´é‡å¤§äº¤æ˜“å†³ç­–çš„å‹åŠ›æ—¶ï¼Œæ‚¨ä¼šï¼Ÿ",
          options: [
            { text: "æ„Ÿåˆ°å·¨å¤§å‹åŠ›ï¼Œå½±å“åˆ¤æ–­", score: 1 },
            { text: "æœ‰å‹åŠ›ï¼Œä½†èƒ½å¤Ÿåº”å¯¹", score: 2 },
            { text: "å‹åŠ›é€‚ä¸­ï¼Œåè€Œæ›´ä¸“æ³¨", score: 4 },
            { text: "æ²¡æœ‰å‹åŠ›ï¼Œå¹³å¸¸å¿ƒå¯¹å¾…", score: 3 },
          ],
        },
        {
          id: 19,
          category: "å‹åŠ›ç®¡ç†",
          dimension: "stress",
          text: "äº¤æ˜“ä¹‹å¤–ï¼Œæ‚¨å¦‚ä½•ç¼“è§£å‹åŠ›ï¼Ÿ",
          options: [
            { text: "æ²¡æœ‰å›ºå®šçš„æ–¹å¼", score: 1 },
            { text: "å¶å°”åšäº›æ”¾æ¾æ´»åŠ¨", score: 2 },
            { text: "å®šæœŸè¿åŠ¨æˆ–å†¥æƒ³", score: 4 },
            { text: "æœ‰å®Œæ•´çš„å‹åŠ›ç®¡ç†è®¡åˆ’", score: 3 },
          ],
        },
        {
          id: 20,
          category: "å‹åŠ›ç®¡ç†",
          dimension: "stress",
          text: "é•¿æœŸäº¤æ˜“å¯¹æ‚¨çš„ç”Ÿæ´»å½±å“å¦‚ä½•ï¼Ÿ",
          options: [
            { text: "ä¸¥é‡å½±å“ç”Ÿæ´»å’Œäººé™…å…³ç³»", score: 1 },
            { text: "æœ‰ä¸€å®šå½±å“", score: 2 },
            { text: "å½±å“è¾ƒå°ï¼Œèƒ½å¹³è¡¡", score: 3 },
            { text: "å®Œå…¨å¹³è¡¡ï¼Œäº’ä¸å¹²æ‰°", score: 4 },
          ],
        },
      ];

      // ===== ç»´åº¦é…ç½® =====
      const dimensions = {
        risk: { name: "é£é™©æ‰¿å—èƒ½åŠ›", icon: "ğŸ²", color: "#6366f1" },
        emotion: { name: "æƒ…ç»ªæ§åˆ¶èƒ½åŠ›", icon: "ğŸ˜Œ", color: "#10b981" },
        decision: { name: "å†³ç­–èƒ½åŠ›", icon: "ğŸ§ ", color: "#f59e0b" },
        discipline: { name: "çºªå¾‹æ€§", icon: "ğŸ“‹", color: "#8b5cf6" },
        stress: { name: "å‹åŠ›ç®¡ç†", icon: "ğŸ’ª", color: "#ec4899" },
      };

      // ===== åº”ç”¨çŠ¶æ€ =====
      let currentQuestionIndex = 0;
      let answers = [];
      let testStartTime = null;

      // ===== DOMå…ƒç´  =====
      const screens = {
        welcome: document.getElementById("welcomeScreen"),
        test: document.getElementById("testScreen"),
        result: document.getElementById("resultScreen"),
      };

      const elements = {
        startBtn: document.getElementById("startBtn"),
        retakeBtn: document.getElementById("retakeBtn"),

        currentQuestion: document.getElementById("currentQuestion"),
        totalQuestions: document.getElementById("totalQuestions"),
        progressPercent: document.getElementById("progressPercent"),
        progressFill: document.getElementById("progressFill"),

        questionCategory: document.getElementById("questionCategory"),
        questionText: document.getElementById("questionText"),
        optionsContainer: document.getElementById("optionsContainer"),

        totalScore: document.getElementById("totalScore"),
        scoreLevel: document.getElementById("scoreLevel"),
        scoreText: document.getElementById("scoreText"),
        scoreCircle: document.getElementById("scoreCircle"),
        dimensionBars: document.getElementById("dimensionBars"),
        analysisContent: document.getElementById("analysisContent"),
        recommendationList: document.getElementById("recommendationList"),
      };

      // ===== å±å¹•åˆ‡æ¢ =====
      function showScreen(screenName) {
        Object.values(screens).forEach((screen) =>
          screen.classList.remove("active")
        );
        screens[screenName].classList.add("active");
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      // ===== å¼€å§‹æµ‹è¯• =====
      function startTest() {
        currentQuestionIndex = 0;
        answers = new Array(questions.length).fill(null);
        testStartTime = Date.now();

        elements.totalQuestions.textContent = questions.length;
        showScreen("test");
        renderQuestion();
      }

      // ===== æ¸²æŸ“é—®é¢˜ =====
      function renderQuestion() {
        const question = questions[currentQuestionIndex];

        // æ›´æ–°è¿›åº¦
        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        elements.currentQuestion.textContent = currentQuestionIndex + 1;
        elements.progressPercent.textContent = Math.round(progress) + "%";
        elements.progressFill.style.width = progress + "%";

        // æ›´æ–°é—®é¢˜å†…å®¹
        elements.questionCategory.textContent = question.category;
        elements.questionText.textContent = question.text;

        // æ¸²æŸ“é€‰é¡¹
        elements.optionsContainer.innerHTML = "";
        question.options.forEach((option, index) => {
          const button = document.createElement("button");
          button.className = "option-btn";
          button.textContent = option.text;

          // å¦‚æœå·²ç»é€‰æ‹©è¿‡ï¼Œæ˜¾ç¤ºé€‰ä¸­çŠ¶æ€
          if (answers[currentQuestionIndex] === index) {
            button.classList.add("selected");
          }

          button.addEventListener("click", () => selectOption(index));
          elements.optionsContainer.appendChild(button);
        });
      }

      // ===== é€‰æ‹©é€‰é¡¹ =====
      function selectOption(optionIndex) {
        answers[currentQuestionIndex] = optionIndex;

        // æ›´æ–°UI
        const buttons =
          elements.optionsContainer.querySelectorAll(".option-btn");
        buttons.forEach((btn, idx) => {
          btn.classList.toggle("selected", idx === optionIndex);
        });

        // è‡ªåŠ¨è·³è½¬åˆ°ä¸‹ä¸€é¢˜æˆ–æ˜¾ç¤ºç»“æœ
        setTimeout(() => {
          if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            renderQuestion();
          } else {
            // æœ€åä¸€é¢˜ï¼Œæ˜¾ç¤ºç»“æœ
            showResults();
          }
        }, 300); // å»¶è¿Ÿ300msè®©ç”¨æˆ·çœ‹åˆ°é€‰ä¸­æ•ˆæœ
      }

      // ===== è®¡ç®—å¾—åˆ† =====
      function calculateScores() {
        const scores = {
          total: 0,
          dimensions: {
            risk: { score: 0, count: 0 },
            emotion: { score: 0, count: 0 },
            decision: { score: 0, count: 0 },
            discipline: { score: 0, count: 0 },
            stress: { score: 0, count: 0 },
          },
        };

        answers.forEach((answerIndex, questionIndex) => {
          const question = questions[questionIndex];
          const score = question.options[answerIndex].score;

          scores.total += score;
          scores.dimensions[question.dimension].score += score;
          scores.dimensions[question.dimension].count++;
        });

        // è®¡ç®—ç™¾åˆ†æ¯”å¾—åˆ†
        const maxScore = questions.length * 4;
        scores.percentage = Math.round((scores.total / maxScore) * 100);

        // è®¡ç®—å„ç»´åº¦å¹³å‡åˆ†
        Object.keys(scores.dimensions).forEach((dim) => {
          const dimData = scores.dimensions[dim];
          dimData.average =
            dimData.count > 0 ? dimData.score / dimData.count : 0;
          dimData.percentage = Math.round((dimData.average / 4) * 100);
        });

        return scores;
      }

      // ===== è·å–ç­‰çº§è¯„ä»· =====
      function getScoreLevel(percentage) {
        if (percentage >= 85) {
          return {
            level: "ä¼˜ç§€äº¤æ˜“å‘˜",
            description:
              "æ‚¨å±•ç°å‡ºäº†å‡ºè‰²çš„äº¤æ˜“å¿ƒç†ç´ è´¨ã€‚åœ¨é£é™©æ§åˆ¶ã€æƒ…ç»ªç®¡ç†ã€å†³ç­–èƒ½åŠ›ç­‰æ–¹é¢éƒ½è¡¨ç°ä¼˜å¼‚ã€‚ç»§ç»­ä¿æŒè¿™ç§ä¸“ä¸šçš„äº¤æ˜“æ€åº¦ï¼Œæ‚¨å¾ˆå¯èƒ½æˆä¸ºä¸€åæˆåŠŸçš„äº¤æ˜“å‘˜ã€‚",
            color: "#10b981",
          };
        } else if (percentage >= 70) {
          return {
            level: "è‰¯å¥½äº¤æ˜“å‘˜",
            description:
              "æ‚¨å…·å¤‡è¾ƒå¥½çš„äº¤æ˜“å¿ƒç†ç´ è´¨ï¼Œåœ¨å¤šä¸ªç»´åº¦ä¸Šè¡¨ç°è‰¯å¥½ã€‚é€šè¿‡æŒç»­å­¦ä¹ å’Œå®è·µï¼Œå…³æ³¨å¼±é¡¹çš„æ”¹è¿›ï¼Œæ‚¨æœ‰å¾ˆå¤§çš„æå‡ç©ºé—´ã€‚",
            color: "#6366f1",
          };
        } else if (percentage >= 55) {
          return {
            level: "åˆæ ¼äº¤æ˜“å‘˜",
            description:
              "æ‚¨å…·å¤‡åŸºæœ¬çš„äº¤æ˜“å¿ƒç†ç´ è´¨ï¼Œä½†åœ¨æŸäº›æ–¹é¢è¿˜éœ€è¦åŠ å¼ºã€‚å»ºè®®é‡ç‚¹å…³æ³¨å¾—åˆ†è¾ƒä½çš„ç»´åº¦ï¼Œé€šè¿‡å­¦ä¹ å’Œè®­ç»ƒæ¥æå‡ã€‚",
            color: "#f59e0b",
          };
        } else {
          return {
            level: "éœ€è¦æå‡",
            description:
              "æ‚¨çš„äº¤æ˜“å¿ƒç†ç´ è´¨è¿˜æœ‰å¾ˆå¤§çš„æå‡ç©ºé—´ã€‚å»ºè®®åœ¨è¿›è¡Œå®ç›˜äº¤æ˜“å‰ï¼Œå…ˆç³»ç»Ÿå­¦ä¹ äº¤æ˜“å¿ƒç†å­¦ï¼Œå¹¶é€šè¿‡æ¨¡æ‹Ÿäº¤æ˜“æ¥é”»ç‚¼å¿ƒç†ç´ è´¨ã€‚",
            color: "#ef4444",
          };
        }
      }

      // ===== æ˜¾ç¤ºç»“æœ =====
      function showResults() {
        const scores = calculateScores();
        const levelInfo = getScoreLevel(scores.percentage);

        // æ˜¾ç¤ºæ€»åˆ†
        elements.totalScore.textContent = scores.percentage;
        elements.scoreLevel.textContent = levelInfo.level;
        elements.scoreText.textContent = levelInfo.description;

        // åŠ¨ç”»æ˜¾ç¤ºåœ†å½¢è¿›åº¦
        setTimeout(() => {
          const circumference = 2 * Math.PI * 90;
          const offset =
            circumference - (scores.percentage / 100) * circumference;
          elements.scoreCircle.style.strokeDashoffset = offset;
        }, 100);

        // æ·»åŠ SVGæ¸å˜
        if (!document.querySelector("#scoreGradient")) {
          const svg = document.querySelector(".score-svg");
          const defs = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "defs"
          );
          const gradient = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "linearGradient"
          );
          gradient.setAttribute("id", "scoreGradient");
          gradient.innerHTML = `
            <stop offset="0%" stop-color="#6366f1"/>
            <stop offset="100%" stop-color="#818cf8"/>
        `;
          defs.appendChild(gradient);
          svg.insertBefore(defs, svg.firstChild);
        }

        // æ¸²æŸ“ç»´åº¦å¾—åˆ†
        renderDimensionScores(scores.dimensions);

        // æ¸²æŸ“åˆ†æ
        renderAnalysis(scores.dimensions);

        // æ¸²æŸ“å»ºè®®
        renderRecommendations(scores.dimensions);

        showScreen("result");
      }

      // ===== æ¸²æŸ“ç»´åº¦å¾—åˆ† =====
      function renderDimensionScores(dimensionsData) {
        elements.dimensionBars.innerHTML = "";

        Object.keys(dimensions).forEach((key, index) => {
          const dim = dimensions[key];
          const data = dimensionsData[key];

          const barElement = document.createElement("div");
          barElement.className = "dimension-bar";
          barElement.innerHTML = `
            <div class="dimension-header">
                <span class="dimension-name">
                    <span>${dim.icon}</span>
                    ${dim.name}
                </span>
                <span class="dimension-score">${data.percentage}åˆ†</span>
            </div>
            <div class="dimension-bar-bg">
                <div class="dimension-bar-fill" data-width="${data.percentage}"></div>
            </div>
        `;

          elements.dimensionBars.appendChild(barElement);

          // åŠ¨ç”»æ˜¾ç¤ºè¿›åº¦æ¡
          setTimeout(() => {
            const fill = barElement.querySelector(".dimension-bar-fill");
            fill.style.width = data.percentage + "%";
          }, 100 + index * 100);
        });
      }

      // ===== æ¸²æŸ“åˆ†æ =====
      function renderAnalysis(dimensionsData) {
        elements.analysisContent.innerHTML = "";

        const analyses = [];

        Object.keys(dimensions).forEach((key) => {
          const dim = dimensions[key];
          const data = dimensionsData[key];
          let text = "";

          if (data.percentage >= 80) {
            text = `æ‚¨åœ¨${dim.name}æ–¹é¢è¡¨ç°ä¼˜ç§€ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°åº”å¯¹ç›¸å…³æŒ‘æˆ˜ã€‚`;
          } else if (data.percentage >= 60) {
            text = `æ‚¨åœ¨${dim.name}æ–¹é¢è¡¨ç°è‰¯å¥½ï¼Œä½†ä»æœ‰æå‡ç©ºé—´ã€‚`;
          } else {
            text = `${dim.name}æ˜¯æ‚¨éœ€è¦é‡ç‚¹å…³æ³¨å’Œæå‡çš„é¢†åŸŸã€‚`;
          }

          analyses.push({
            icon: dim.icon,
            name: dim.name,
            text: text,
            percentage: data.percentage,
          });
        });

        // æŒ‰å¾—åˆ†æ’åºï¼Œå…ˆæ˜¾ç¤ºéœ€è¦æ”¹è¿›çš„
        analyses.sort((a, b) => a.percentage - b.percentage);

        analyses.forEach((analysis) => {
          const item = document.createElement("div");
          item.className = "analysis-item";
          item.innerHTML = `
            <h4><span>${analysis.icon}</span> ${analysis.name}</h4>
            <p>${analysis.text}</p>
        `;
          elements.analysisContent.appendChild(item);
        });
      }

      // ===== æ¸²æŸ“å»ºè®® =====
      function renderRecommendations(dimensionsData) {
        elements.recommendationList.innerHTML = "";

        const recommendations = [
          {
            icon: "ğŸ“š",
            title: "ç³»ç»Ÿå­¦ä¹ ",
            text: "æ·±å…¥å­¦ä¹ äº¤æ˜“å¿ƒç†å­¦å’Œè¡Œä¸ºé‡‘èå­¦ï¼Œç†è§£äº¤æ˜“ä¸­çš„å¿ƒç†é™·é˜±å’Œè®¤çŸ¥åå·®ã€‚",
          },
          {
            icon: "ğŸ“",
            title: "è®°å½•äº¤æ˜“æ—¥å¿—",
            text: "è¯¦ç»†è®°å½•æ¯ç¬”äº¤æ˜“çš„å¿ƒç†çŠ¶æ€ã€å†³ç­–è¿‡ç¨‹å’Œç»“æœï¼Œå®šæœŸå›é¡¾æ€»ç»“ã€‚",
          },
          {
            icon: "ğŸ¯",
            title: "æ¨¡æ‹Ÿè®­ç»ƒ",
            text: "é€šè¿‡æ¨¡æ‹Ÿäº¤æ˜“æ¥é”»ç‚¼å†³ç­–èƒ½åŠ›å’Œæƒ…ç»ªæ§åˆ¶ï¼Œåœ¨æ— é£é™©ç¯å¢ƒä¸­æå‡æŠ€èƒ½ã€‚",
          },
          {
            icon: "ğŸ§˜",
            title: "å†¥æƒ³ç»ƒä¹ ",
            text: "æ¯å¤©è¿›è¡Œ10-15åˆ†é’Ÿçš„å†¥æƒ³ï¼Œæå‡ä¸“æ³¨åŠ›å’Œæƒ…ç»ªç®¡ç†èƒ½åŠ›ã€‚",
          },
        ];

        // æ ¹æ®å¾—åˆ†è¾ƒä½çš„ç»´åº¦æ·»åŠ é’ˆå¯¹æ€§å»ºè®®
        Object.keys(dimensionsData).forEach((key) => {
          const data = dimensionsData[key];
          const dim = dimensions[key];

          if (data.percentage < 60) {
            let specificRec = null;

            switch (key) {
              case "risk":
                specificRec = {
                  icon: "âš ï¸",
                  title: "åŠ å¼ºé£é™©æ„è¯†",
                  text: "å­¦ä¹ å’Œå®è·µä»“ä½ç®¡ç†ï¼Œä¸¥æ ¼æ§åˆ¶å•ç¬”äº¤æ˜“é£é™©ï¼Œå»ºç«‹å®Œå–„çš„é£é™©ç®¡ç†ä½“ç³»ã€‚",
                };
                break;
              case "emotion":
                specificRec = {
                  icon: "ğŸ’­",
                  title: "æƒ…ç»ªç®¡ç†è®­ç»ƒ",
                  text: "è¯†åˆ«å¹¶è®°å½•äº¤æ˜“ä¸­çš„æƒ…ç»ªæ³¢åŠ¨ï¼Œå­¦ä¹ æƒ…ç»ªè°ƒèŠ‚æŠ€å·§ï¼Œé¿å…æƒ…ç»ªåŒ–äº¤æ˜“ã€‚",
                };
                break;
              case "decision":
                specificRec = {
                  icon: "ğŸ”",
                  title: "æå‡åˆ†æèƒ½åŠ›",
                  text: "å»ºç«‹ç³»ç»Ÿçš„åˆ†ææ¡†æ¶ï¼ŒåŸ¹å…»å®¢è§‚ç†æ€§çš„å†³ç­–ä¹ æƒ¯ï¼Œé¿å…ä¸»è§‚è‡†æ–­ã€‚",
                };
                break;
              case "discipline":
                specificRec = {
                  icon: "âœ…",
                  title: "ä¸¥æ ¼æ‰§è¡Œçºªå¾‹",
                  text: "åˆ¶å®šæ˜ç¡®çš„äº¤æ˜“è§„åˆ™å¹¶ä¸¥æ ¼éµå®ˆï¼ŒåŸ¹å…»äº¤æ˜“çºªå¾‹æ€§ï¼Œä¸éšæ„æ›´æ”¹è®¡åˆ’ã€‚",
                };
                break;
              case "stress":
                specificRec = {
                  icon: "ğŸƒ",
                  title: "å‹åŠ›ç®¡ç†",
                  text: "å»ºç«‹å¥åº·çš„ç”Ÿæ´»æ–¹å¼ï¼Œå®šæœŸè¿åŠ¨æ”¾æ¾ï¼Œä¿æŒå·¥ä½œç”Ÿæ´»å¹³è¡¡ã€‚",
                };
                break;
            }

            if (specificRec) {
              recommendations.unshift(specificRec);
            }
          }
        });

        // åªæ˜¾ç¤ºå‰5ä¸ªå»ºè®®
        recommendations.slice(0, 5).forEach((rec) => {
          const item = document.createElement("div");
          item.className = "recommendation-item";
          item.innerHTML = `
            <div class="recommendation-icon">${rec.icon}</div>
            <div class="recommendation-content">
                <h4>${rec.title}</h4>
                <p>${rec.text}</p>
            </div>
        `;
          elements.recommendationList.appendChild(item);
        });
      }

      // ===== é‡æ–°æµ‹è¯• =====
      function retakeTest() {
        if (confirm("ç¡®å®šè¦é‡æ–°å¼€å§‹æµ‹è¯•å—ï¼Ÿå½“å‰ç»“æœå°†ä¼šä¸¢å¤±ã€‚")) {
          startTest();
        }
      }

      // ===== äº‹ä»¶ç›‘å¬ =====
      elements.startBtn.addEventListener("click", startTest);
      elements.retakeBtn.addEventListener("click", retakeTest);

      // ===== é”®ç›˜å¿«æ·é”® =====
      document.addEventListener("keydown", (e) => {
        if (screens.test.classList.contains("active")) {
          if (e.key >= "1" && e.key <= "4") {
            const optionIndex = parseInt(e.key) - 1;
            const question = questions[currentQuestionIndex];
            if (
              optionIndex < question.options.length &&
              answers[currentQuestionIndex] === null
            ) {
              selectOption(optionIndex);
            }
          }
        }
      });

      // ===== åˆå§‹åŒ– =====
      console.log("äº¤æ˜“å‘˜å¿ƒç†æµ‹è¯•ç³»ç»Ÿå·²åŠ è½½");
      console.log(
        `å…±æœ‰ ${questions.length} é“é¢˜ç›®ï¼Œæ¶µç›– ${
          Object.keys(dimensions).length
        } ä¸ªç»´åº¦`
      );
    </script>
  </body>
</html>
